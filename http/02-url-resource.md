# 2. URL과 리소스

### 2.1 인터넷의 리소스 탐색하기

URL을 사용하면 리소스를 일관된 방식으로 지칭할 수 있다. URL은 단일 방식의 작명 규칙을 갖는다.

### 2.2 URL 문법

대부분의 URL 스킴 문법은 9개 부분으로 나뉜다. 이 중 제일 중요한 세 가지 컴포넌트는 스킴, 호스트, 경로이다.

`<스킴>://<사용자 이름>:<비밀번호>@<호스트>:<포트>/<경로>;<파라미터>?<질의>#<프래그먼트>`

스킴: 어떤 프로토콜을 사용하여 리소스를 요청해야 하는지를 명시, 대소문자 구분 없으며 : 로 구분

호스트와 포트: 접근하려는 리소스를 가진 웹 상의 장비와 해당 장비가 열어놓은 네트워크 포트

사용자 이름과 비밀번호: 특정 프로토콜들은 데이터 접근을 허용하기 위해 이름과 비밀번호를 요구

경로: 리소스가 서버 내에 위치한 경로, 유닉스 파일시스템 경로와 유사

파라미터: 프로토콜에서 필요로 하는 추가적인 정보

질의 문자열: DB 등의 서비스에서 요청받을 리소스 범위를 좁히기 위해 사용

프래그먼트: 리소스의 특정 부분을 가리킬 수 있도록 하는 컴포넌트, 서버는 객체 일부가 아닌 전체만 다루기 때문에 클라이언트는 서버에 프래그먼트를 전달하지 않고, 리소스를 내려받고 후처리하는 데에만 사용한다.

### 2.3 단축 URL

웹 클라이언트는 몇몇 단축 URL을 인식하고 사용한다. 상대 URL은 리소스 안의 리소스를 간결하게 기술하는데 사용할 수 있다.

**2.3.1 상대 URL**

상대 URL은 URL을 짧게 표기하는 방식이다. 이는 문서의 URL(기저 URL에서 얻어온)을 기준으로 하는 상대경로로 해석된다. 다음의 예시를 보자

기저 URL: http://www.hello.com/index.html

상대 URL: ./tools.html

새로운 절대 URL: http://www.hello.com/tools.html

상대 URL은 프래그먼트이거나 URL 일부다. 상대 참조 해석 과정은 생략

**2.3.2 URL 확장**

호스트 명 확장: 휴리스틱을 이용해 브라우저에서 호스트 명을 자동완성 , 추천 등

히스토리 확장: 사용자가 방문했던 URL 기록을 저장하고 제시

### 2.4 안전하지 않은 문자

일반적으로 URL에는 알파벳 등의 안전한 문자만 포함하도록 해야한다. 보이지 않는 문자 등을 넣는 것은 금지된다. 사용자에 따라 알파벳이 아닌 문자를 추가하는 경우가 있는데, 이를 안전하게 추가하기 위해 이스케이프라는 기능이 있다.

**2.4.1 URL 문자 집합**

컴퓨터의 기본 문자 집합은 US-ASCII이지만, 영어권이 아닌 사람들의 언어는 지원되지 않고, URL이 이진 데이터를 포함해야 하는 경우도 있다. 이스케이프는 이런 문자나 데이터를 인코딩할 수 있게 한다.

**2.4.2 인코딩 체계**

안전하지 않은 문자를 퍼센티지 기호 (%)로 시작해, ASCII 코드로 표현되는 두 개의 숫자로 이루어진 이스케이프 문자로 변경

**2.4.3 문자 제한**

%, $, + 등등의 몇몇 문자는 URL에서 예약되어 있다. 이런 문자들을 본래 목적과 다르게 사용하려면 반드시 인코딩해야 한다.

**2.4.4 좀 더 알아보기**

애플리케이션 개발자들이 안전하지 않은 문자를 인코딩하지 않는 것은 실수다. 애플리케이션은 정해진 방식대로 구현해야 한다. 입력받은 URL에서 인코딩할 문자를 결정하는 데는 브라우저 등 사용자로부터 최초로 URL을 입력받는 애플리케이션에서 하는 게 가장 적절하다.

### 2.5 스킴의 바다

- http: 일반 하이퍼텍스트 전송 프로토콜
- https: HTTP와 동일하지만 커넥션 양 끝단에서 SSL 사용
- mailto: 이메일 주소
- ftp: 파일 전송 프로토콜
- rtsp, rtspu: 실시간 스트리밍 프로토콜
- file: 호스트 기기에서 바로 접근 가능한 파일
- telnet: 대화형 서비스 접근 프로토콜

### 2.6 미래

URL은 강력한 도구지만, 리소스가 옮겨졌을 때 더 이상 사용할 수가 없는 문제가 있다. URN은 객체가 옮겨지더라도 항상 객체를 가리키는 이름을 제공한다.

**2.6.1 지금이 아니면 언제**

그러나 URN을 표준으로 바꾸는 것은 매우 큰 작업이다. 이는 여러 합의와 노력이 필요한 과정이기에 URL은 대체제가 없는 한 당분간 사용될 것이다.
