애플리케이션을 서버에서 운영하기 위해서는 프로비저닝 과정을 거쳐야 한다.

**프로비저닝이란?**
*서버의 환경을 어떤 애플리케이션이 실행가능한 상태로 준비하는 과정*

운영에 있어서 프로비저닝은 가장 중요하고, 어려운 작업 중 하나였다.

도커를 사용한다고 프로비저닝 과정이 없어지는 것은 아니다. 그러나 도커는 서버 환경이 지속적으로 변화하고 동일성이 없어지는 문제를 해결해준다. 과거에 만들어둔 이미지가 있다면, 대부분 경우 잘 동작한다.

- Dockerfile만 있다면 잘 되리라고 보장하기 어렵다. 빌드 자체는 시점에 영향을 받을 수 있기 때문이다.
- 초기화 작업에 외부 의존성이 없고 과거 이미지가 잘 저장되어 있다면 실행에 문제가 없을 것이다.

이제 가상서버를 만들어 **실습-2**에서 진행한 모니위키를 온라인에 배포해본다.

### 도커 허브에 이미지 업로드

도커 클라이언트는 기본적으로 도커 허브를 사용한다. 이전까지 사용한 이미지는 이미지의 이름과 태그정도로 이루어져 있었다. 그러나 실제로 모든 이미지의 풀네임은 이와 차이가 있다.

예를 들어 `ubuntu:bionic` 이미지의 풀네임은 `docker.io/library/ubuntu:bionic`이다.

이미지의 풀네임 구성은 다음과 같다.

- 레지스트리 서버 주소
- 네임스페이스(도커 허브의 경우 사용자의 이름)
- 이미지 고유 이름
- 태그

도커 허브는 직접 만든 이미지를 올리거나 배포하는 데도 사용할 수 있다. 

로그인을 한 뒤, 도커 이미지를 도커 허브에 올리기 위해 자신의 도커 허브 ID와 동일한 네임스페이스를 지정한다. ***tag 명령어는 소스이미지를 참조해 새로운 태그이미지 생성***

```bash
$ docker tag <이미지> azsx741/moniwiki
$ docker push azsx741/moniwiki
```

도커허브의 ID와 일치한다면 이미지 저장소가 없더라도 새롭게 생성되어 push된다.

이제 로컬에서 이미지를 삭제하더라도 허브에서 다시 풀 받을 수 있다. 또한, 다른 서버에서 이 이미지를 풀 받아 실행하는 것도 가능하다.

### 가상 서버 실행 및 도커 Pull

생략